var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s;import{l as t,v as o}from"./index.3775e6fb.js";import{L as n,t as i}from"./index.d5dc0894.js";import{e as d,v as u,u as c,B as p,r as m,o as b,g as v,w as f,m as h,a as w,l as y,I as g}from"./vendor.def0bd7b.js";const x={class:"form-btn"},j=g(" 提交 "),_={class:"handle"},k=g("忘记密码"),O=y("span",{class:"split-line"},null,-1),V=g("注册账号"),P={class:"third"},q=g("其他登录方式"),B={setup(e){const g=d(),B=u();c();const C="onBlur",I=p({username:"15911111111",password:"123456789"}),S={username:[{required:!0,message:"请填写用户名",trigger:C},{validator:(e,a)=>e?!!o(e)||"手机号格式不正确！":"请填写手机号码！",trigger:C}],password:[{required:!0,message:"密码不能为空",trigger:C}]},U=e=>{return o=this,n=null,d=function*(){try{const{data:o}=yield t(((e,t)=>{for(var o in t||(t={}))l.call(t,o)&&r(e,o,t[o]);if(a)for(var o of a(t))s.call(t,o)&&r(e,o,t[o]);return e})({},e)),{token:n}=o;yield g.dispatch("user/saveToken",{token:n}),B.push("/user")}catch(o){i.fail("登录失败，请稍后再试...")}},new Promise(((e,a)=>{var l=e=>{try{r(d.next(e))}catch(l){a(l)}},s=e=>{try{r(d.throw(e))}catch(l){a(l)}},r=a=>a.done?e(a.value):Promise.resolve(a.value).then(l,s);r((d=d.apply(o,n)).next())}));var o,n,d};return(e,a)=>{const l=m("van-field"),s=m("van-cell-group"),r=m("van-button"),t=m("van-form"),o=m("van-divider"),i=m("svg-icon");return b(),v(h(n),null,{body:f((()=>[w(t,{"label-width":"0",onSubmit:U},{default:f((()=>[w(s,{inset:""},{default:f((()=>[w(l,{modelValue:h(I).username,"onUpdate:modelValue":a[0]||(a[0]=e=>h(I).username=e),rules:S.username,name:"username",label:"",placeholder:"用户名",maxlength:"11",clearable:""},null,8,["modelValue","rules"]),w(l,{modelValue:h(I).password,"onUpdate:modelValue":a[1]||(a[1]=e=>h(I).password=e),type:"password",name:"password",label:"",placeholder:"密码",clearable:"",rules:S.password},null,8,["modelValue","rules"])])),_:1}),y("div",x,[w(r,{round:"",block:"",type:"primary","native-type":"submit",class:"btn-item h50"},{default:f((()=>[j])),_:1})])])),_:1})])),foot:f((()=>[y("div",null,[y("div",_,[w(r,{plain:"",class:"txt-btn no-border yellow-btn",onClick:a[2]||(a[2]=e=>h(B).push("/forgot"))},{default:f((()=>[k])),_:1}),O,w(r,{plain:"",class:"txt-btn no-border yellow-btn",onClick:a[3]||(a[3]=e=>h(B).push("/register"))},{default:f((()=>[V])),_:1})]),y("div",P,[w(o,{class:"line"},{default:f((()=>[q])),_:1}),w(i,{"icon-class":"wechat","class-name":"third-icon wechat"}),w(i,{"icon-class":"weibo","class-name":"third-icon weibo"})])])])),_:1})}}};export{B as default};
